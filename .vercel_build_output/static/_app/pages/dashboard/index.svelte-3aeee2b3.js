import{S as ne,i as le,s as oe,e as y,t as M,k as I,c as E,a as P,g as z,d as b,n as C,b as S,f as H,I as f,J as K,N as Y,ag as ge,P as Z,K as we,O as ie,a6 as x,T as L,U as ce,V as ve,h as ke,x as A,r as de,u as j,w as fe,j as V,m as N,o as O,L as be,v as J,_ as Ae,ac as $e,ah as je,ai as Te,ae as Fe,af as De,Q as Ve,aj as Ne,ak as Oe,al as Je,a0 as Me,am as ze,an as Be,ao as ye,H as Re}from"../../chunks/vendor-c53e2aa3.js";import{F as Ee,S as Ue,A as qe}from"../../chunks/activityIndicator-236182aa.js";import{S as ue}from"../../chunks/snackbar-9e55794d.js";import{g as He}from"../../chunks/firebase-3e4355ad.js";import{u as Pe}from"../../chunks/stores-31a253bf.js";function Se(n){let e,t,s,a,r,c,i,g,u,d,_,l;return{c(){e=y("div"),t=y("span"),s=M("task_alt"),c=I(),i=y("p"),g=M("Copied!"),this.h()},l(o){e=E(o,"DIV",{class:!0});var p=P(e);t=E(p,"SPAN",{class:!0});var m=P(t);s=z(m,"task_alt"),m.forEach(b),c=C(p),i=E(p,"P",{class:!0});var v=P(i);g=z(v,"Copied!"),v.forEach(b),p.forEach(b),this.h()},h(){S(t,"class","material-icons-outlined done-icon svelte-1sdwl3m"),S(i,"class","copiedText svelte-1sdwl3m"),S(e,"class","done svelte-1sdwl3m")},m(o,p){H(o,e,p),f(e,t),f(t,s),f(e,c),f(e,i),f(i,g),l=!0},i(o){l||(K(()=>{r&&r.end(1),a=Y(t,ge,{delay:444}),a.start()}),K(()=>{d&&d.end(1),u=Y(i,Z,{y:21,delay:444,opacity:0}),u.start()}),K(()=>{_||(_=we(e,ie,{duration:500},!0)),_.run(1)}),l=!0)},o(o){a&&a.invalidate(),r=x(t,ge,{}),u&&u.invalidate(),d=x(i,Z,{y:21,opacity:0}),_||(_=we(e,ie,{duration:500},!1)),_.run(0),l=!1},d(o){o&&b(e),o&&r&&r.end(),o&&d&&d.end(),o&&_&&_.end()}}}function Ke(n){let e,t,s,a,r,c,i,g,u,d,_,l,o,p,m=n[1]&&Se();return{c(){e=y("div"),t=y("div"),s=y("p"),a=M(n[0]),r=I(),c=y("p"),i=M("Click to copy"),g=I(),u=y("span"),d=M("content_copy"),_=I(),m&&m.c(),this.h()},l(v){e=E(v,"DIV",{class:!0});var $=P(e);t=E($,"DIV",{class:!0});var T=P(t);s=E(T,"P",{class:!0});var B=P(s);a=z(B,n[0]),B.forEach(b),r=C(T),c=E(T,"P",{class:!0});var k=P(c);i=z(k,"Click to copy"),k.forEach(b),T.forEach(b),g=C($),u=E($,"SPAN",{class:!0});var q=P(u);d=z(q,"content_copy"),q.forEach(b),_=C($),m&&m.l($),$.forEach(b),this.h()},h(){S(s,"class","title svelte-1sdwl3m"),S(c,"class","helperText svelte-1sdwl3m"),S(t,"class","left svelte-1sdwl3m"),S(u,"class","material-icons-round icon svelte-1sdwl3m"),S(e,"class","passwordCard svelte-1sdwl3m"),L(e,"copied",n[1])},m(v,$){H(v,e,$),f(e,t),f(t,s),f(s,a),f(t,r),f(t,c),f(c,i),f(e,g),f(e,u),f(u,d),f(e,_),m&&m.m(e,null),l=!0,o||(p=ce(e,"click",ve(n[2])),o=!0)},p(v,[$]){(!l||$&1)&&ke(a,v[0]),v[1]?m?$&2&&A(m,1):(m=Se(),m.c(),A(m,1),m.m(e,null)):m&&(de(),j(m,1,1,()=>{m=null}),fe()),$&2&&L(e,"copied",v[1])},i(v){l||(A(m),l=!0)},o(v){j(m),l=!1},d(v){v&&b(e),m&&m.d(),o=!1,p()}}}function Le(n,e,t){let{title:s}=e,{password:a}=e,r=!1;const c=()=>{r||fetch("/api/password/depass",{body:JSON.stringify({encryptedPassword:a}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(i=>i.json()).then(i=>{navigator.clipboard.writeText(i.decryptedPassword),t(1,r=!0),setTimeout(()=>t(1,r=!1),1421)})};return n.$$set=i=>{"title"in i&&t(0,s=i.title),"password"in i&&t(3,a=i.password)},[s,r,c,a]}class Qe extends ne{constructor(e){super();le(this,e,Le,Ke,oe,{title:0,password:3})}}function Ge(n){let e,t;return{c(){e=y("span"),t=M("alternate_email"),this.h()},l(s){e=E(s,"SPAN",{class:!0,slot:!0});var a=P(e);t=z(a,"alternate_email"),a.forEach(b),this.h()},h(){S(e,"class","material-icons-round icon svelte-1ok1592"),S(e,"slot","icon")},m(s,a){H(s,e,a),f(e,t)},d(s){s&&b(e)}}}function We(n){let e,t;return e=new Ue({props:{title:" Add "}}),{c(){V(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,a){O(e,s,a),t=!0},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function Xe(n){let e,t;return e=new qe({}),{c(){V(e.$$.fragment)},l(s){N(e.$$.fragment,s)},m(s,a){O(e,s,a),t=!0},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){j(e.$$.fragment,s),t=!1},d(s){J(e,s)}}}function Ye(n){let e,t,s,a,r,c,i,g,u,d,_,l,o=(n[0]?"expand_less":"add")+"",p,m,v,$,T,B,k,q,Q,ee,F,D,te,G,se,pe;t=new ue({props:{backgroundColor:"#cf6679",borderColor:"tomato",iconColor:"black",text:"Title must be at least 2 characters long.",showSnackbar:n[5],hideSnackbar:n[8]}}),a=new ue({props:{backgroundColor:"#cf6679",borderColor:"tomato",iconColor:"black",text:"Password cannot be less than 8 letters.",showSnackbar:n[6],hideSnackbar:n[9]}}),c=new ue({props:{text:"Password added successfully!",showSnackbar:n[7],hideSnackbar:n[10]}}),v=new Ee({props:{type:"text",placeholder:"Title",id:"title-input",value:n[1],$$slots:{icon:[Ge]},$$scope:{ctx:n}}}),v.$on("change",n[14]),k=new Ee({props:{type:"password",placeholder:"Password",id:"password-input",value:n[2]}}),k.$on("change",n[15]);const _e=[Xe,We],R=[];function me(w,h){return w[4]?0:1}return F=me(n),D=R[F]=_e[F](n),{c(){e=y("form"),V(t.$$.fragment),s=I(),V(a.$$.fragment),r=I(),V(c.$$.fragment),i=I(),g=y("div"),u=y("p"),d=M("Add a new Password"),_=I(),l=y("span"),p=M(o),m=I(),V(v.$$.fragment),$=I(),T=y("div"),B=I(),V(k.$$.fragment),q=I(),Q=y("div"),ee=I(),D.c(),this.h()},l(w){e=E(w,"FORM",{class:!0});var h=P(e);N(t.$$.fragment,h),s=C(h),N(a.$$.fragment,h),r=C(h),N(c.$$.fragment,h),i=C(h),g=E(h,"DIV",{class:!0});var U=P(g);u=E(U,"P",{class:!0});var W=P(u);d=z(W,"Add a new Password"),W.forEach(b),_=C(U),l=E(U,"SPAN",{class:!0});var X=P(l);p=z(X,o),X.forEach(b),U.forEach(b),m=C(h),N(v.$$.fragment,h),$=C(h),T=E(h,"DIV",{class:!0}),P(T).forEach(b),B=C(h),N(k.$$.fragment,h),q=C(h),Q=E(h,"DIV",{class:!0}),P(Q).forEach(b),ee=C(h),D.l(h),h.forEach(b),this.h()},h(){S(u,"class","title svelte-1ok1592"),L(u,"titleExpanded",n[0]),S(l,"class","material-icons-outlined title-icons svelte-1ok1592"),S(g,"class","titleSection svelte-1ok1592"),S(T,"class","gap svelte-1ok1592"),S(Q,"class","gap svelte-1ok1592"),S(e,"class","inputForm svelte-1ok1592"),L(e,"inputFormExpanded",n[0])},m(w,h){H(w,e,h),O(t,e,null),f(e,s),O(a,e,null),f(e,r),O(c,e,null),f(e,i),f(e,g),f(g,u),f(u,d),f(g,_),f(g,l),f(l,p),n[13](l),f(e,m),O(v,e,null),f(e,$),f(e,T),f(e,B),O(k,e,null),f(e,q),f(e,Q),f(e,ee),R[F].m(e,null),G=!0,se||(pe=[ce(g,"click",n[11]),ce(e,"submit",ve(n[12]))],se=!0)},p(w,[h]){const U={};h&32&&(U.showSnackbar=w[5]),t.$set(U);const W={};h&64&&(W.showSnackbar=w[6]),a.$set(W);const X={};h&128&&(X.showSnackbar=w[7]),c.$set(X),h&1&&L(u,"titleExpanded",w[0]),(!G||h&1)&&o!==(o=(w[0]?"expand_less":"add")+"")&&ke(p,o);const ae={};h&2&&(ae.value=w[1]),h&131072&&(ae.$$scope={dirty:h,ctx:w}),v.$set(ae);const he={};h&4&&(he.value=w[2]),k.$set(he);let re=F;F=me(w),F!==re&&(de(),j(R[re],1,1,()=>{R[re]=null}),fe(),D=R[F],D||(D=R[F]=_e[F](w),D.c()),A(D,1),D.m(e,null)),h&1&&L(e,"inputFormExpanded",w[0])},i(w){G||(A(t.$$.fragment,w),A(a.$$.fragment,w),A(c.$$.fragment,w),A(v.$$.fragment,w),A(k.$$.fragment,w),A(D),te||K(()=>{te=Y(e,be,{}),te.start()}),G=!0)},o(w){j(t.$$.fragment,w),j(a.$$.fragment,w),j(c.$$.fragment,w),j(v.$$.fragment,w),j(k.$$.fragment,w),j(D),G=!1},d(w){w&&b(e),J(t),J(a),J(c),n[13](null),J(v),J(k),R[F].d(),se=!1,Ae(pe)}}}function Ze(n,e,t){let s;$e(n,Pe,k=>t(16,s=k));let a=!1,r="",c="",i,g=!1,u=!1,d=!1,_=!1;const l=()=>t(5,u=!1),o=()=>t(6,d=!1),p=()=>t(7,_=!1),m=()=>{t(0,a=!a),a?t(3,i.style.transform="rotate(360deg)",i):t(3,i.style.transform="rotate(0deg)",i)},v=()=>{r.length<2?t(5,u=!0):c.length<8?t(6,d=!0):(t(4,g=!0),fetch("/api/password/encpass",{body:JSON.stringify({decryptedPassword:c}),headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"}).then(k=>k.json()).then(k=>je(Fe(De(He()),"Users",s==null?void 0:s.id),{passwords:Te({timestamp:new Date,title:r,password:k.encryptedPassword})}).then(()=>{t(4,g=!1),t(1,r=""),t(2,c=""),t(0,a=!1),t(7,_=!0)})))};function $(k){Ve[k?"unshift":"push"](()=>{i=k,t(3,i)})}return[a,r,c,i,g,u,d,_,l,o,p,m,v,$,k=>t(1,r=k.target.value),k=>t(2,c=k.target.value)]}class xe extends ne{constructor(e){super();le(this,e,Ze,Ye,oe,{})}}function Ie(n,e,t){const s=n.slice();return s[2]=e[t],s}function Ce(n,e){let t,s,a,r,c,i,g=Re,u;return s=new Qe({props:{title:e[2].title,password:e[2].password}}),{key:n,first:null,c(){t=y("div"),V(s.$$.fragment),a=I(),this.h()},l(d){t=E(d,"DIV",{});var _=P(t);N(s.$$.fragment,_),a=C(_),_.forEach(b),this.h()},h(){this.first=t},m(d,_){H(d,t,_),O(s,t,null),f(t,a),u=!0},p(d,_){e=d;const l={};_&1&&(l.title=e[2].title),_&1&&(l.password=e[2].password),s.$set(l)},r(){i=t.getBoundingClientRect()},f(){Ne(t),g(),Oe(t,i)},a(){g(),g=Je(t,i,ze,{})},i(d){u||(A(s.$$.fragment,d),d&&K(()=>{c&&c.end(1),r=Y(t,be,{}),r.start()}),u=!0)},o(d){j(s.$$.fragment,d),r&&r.invalidate(),d&&(c=x(t,ie,{})),u=!1},d(d){d&&b(t),J(s),d&&c&&c.end()}}}function et(n){let e,t,s,a,r=[],c=new Map,i,g,u;t=new xe({});let d=n[0];const _=l=>l[2].timestamp;for(let l=0;l<d.length;l+=1){let o=Ie(n,d,l),p=_(o);c.set(p,r[l]=Ce(p,o))}return{c(){e=y("main"),V(t.$$.fragment),s=I(),a=y("div");for(let l=0;l<r.length;l+=1)r[l].c();this.h()},l(l){e=E(l,"MAIN",{class:!0});var o=P(e);N(t.$$.fragment,o),s=C(o),a=E(o,"DIV",{class:!0});var p=P(a);for(let m=0;m<r.length;m+=1)r[m].l(p);p.forEach(b),o.forEach(b),this.h()},h(){S(a,"class","passwords svelte-15zvlpw"),S(e,"class","svelte-15zvlpw")},m(l,o){H(l,e,o),O(t,e,null),f(e,s),f(e,a);for(let p=0;p<r.length;p+=1)r[p].m(a,null);u=!0},p(l,[o]){if(n=l,o&1){d=n[0],de();for(let p=0;p<r.length;p+=1)r[p].r();r=Me(r,o,_,1,n,d,c,a,Be,Ce,null,Ie);for(let p=0;p<r.length;p+=1)r[p].a();fe()}},i(l){if(!u){A(t.$$.fragment,l);for(let o=0;o<d.length;o+=1)A(r[o]);l&&K(()=>{g&&g.end(1),i=Y(e,Z,{x:-500,duration:444,delay:444,opacity:0,easing:ye}),i.start()}),u=!0}},o(l){j(t.$$.fragment,l);for(let o=0;o<r.length;o+=1)j(r[o]);i&&i.invalidate(),l&&(g=x(e,Z,{x:-500,opacity:0,easing:ye})),u=!1},d(l){l&&b(e),J(t);for(let o=0;o<r.length;o+=1)r[o].d();l&&g&&g.end()}}}function tt(n,e,t){let s,a;return $e(n,Pe,r=>t(1,a=r)),n.$$.update=()=>{n.$$.dirty&2&&t(0,s=a==null?void 0:a.passwords.sort((r,c)=>c.timestamp-r.timestamp))},[s,a]}class ot extends ne{constructor(e){super();le(this,e,tt,et,oe,{})}}export{ot as default};
